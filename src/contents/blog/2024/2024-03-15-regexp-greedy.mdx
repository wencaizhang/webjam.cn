---
title: æ­£åˆ™è¡¨è¾¾å¼çš„è´ªå©ªæ¨¡å¼
slug: regexp-greedy
summary: æ­£åˆ™è¡¨è¾¾å¼çš„è´ªå©ªæ¨¡å¼
date: '2024-03-15'
featured: true
tags:
  - æ­£åˆ™
draft: true
featured_image_url: https://static.webjam.cn/images/202405/regexp.webp
---

é‡åˆ°ä¸€ä¸ªéœ€æ±‚: ç°åœ¨æœ‰ä¸€æ®µ HTML å­—ç¬¦ä¸², éœ€è¦æ‹¿åˆ°è¿™é‡Œé¢æ‰€æœ‰çš„ img æ ‡ç­¾çš„ src å±æ€§.

HTML å­—ç¬¦ä¸²å¦‚ä¸‹(å·²ç»è¿‡ç®€åŒ–):

```html
<div class="row">
  <!-- æ³¨æ„é‡Œé¢ä¸‰ä¸ª img æ ‡ç­¾æ˜¯åœ¨åŒä¸€è¡Œ -->
  <img src="https://static.fastadmin.net/assets/images/app/code.png" alt="" />
  <img
    src="https://static.fastadmin.net/assets/images/app/browser.png"
    alt=""
  />
  <img src="https://static.fastadmin.net/assets/images/app/laptop.png" alt="" />
</div>
```

ä¸ºäº†åŒ¹é… img æ ‡ç­¾çš„ src å±æ€§, æˆ‘ä½¿ç”¨çš„æ­£åˆ™æ˜¯ `/<img.*src="(.*)"/g`, åŒ¹é…ç»“æœå¦‚ä¸‹:

![åŒ¹é… src å±æ€§ä¹‹è´ªå©ªæ¨¡å¼](https://static.webjam.cn/images/202405/regex101-demo01.webp)

å¦‚å›¾æ‰€ç¤º, å¹¶æ²¡æœ‰æŒ‰ç…§æœŸå¾…ä¸­çš„åŒ¹é…æ¯ä¸ª src å±æ€§å€¼, åè€Œä»…åŒ¹é…åˆ°æœ€åä¸€ä¸ª src, è€Œä¸”è¿˜å¤šä½™åŒ¹é…äº†å‡ ä¸ªå­—ç¬¦. å›¾ä¸­ä½¿ç”¨çš„å·¥å…·æ˜¯[åŒ¹é… src å±æ€§ä¹‹è´ªå©ªæ¨¡å¼ - regex101](https://regex101.com/r/dCCFvi/1), æ‚¨å¯ä»¥ç‹ ç‹ ç‚¹å‡»æ‰“å¼€æŸ¥çœ‹æœ¬ç¤ºä¾‹.

ç»è¿‡å¤šæ–¹æŸ¥è¯¢(å®é™…ä¸»è¦æ˜¯é—®äº† ChatGPT), æ‰çŸ¥é“è¿™æ˜¯å› ä¸ºæ­£åˆ™é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…æ¨¡å¼å¯¼è‡´çš„.

## ä»€ä¹ˆæ˜¯è´ªå©ªåŒ¹é…

é¡¾åæ€ä¹‰, "è´ªå©ª"å°±æ˜¯å°½å¯èƒ½å¤šçš„åŒ¹é…ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦. ä¸¾ä¸ªä¾‹å­ ğŸŒ°, ç°åœ¨æœ‰ä¸€ä¸ªå­—ç¬¦ä¸² `'abcabc'`, æ­£åˆ™æ˜¯ `/a(.*)c/`, ä½ è®¤ä¸º `(.*)` ä¼šåŒ¹é…å“ªäº›å­—ç¬¦å‘¢? æ˜¯ `b` è¿˜æ˜¯ `bcab` å‘¢?

ç­”æ¡ˆæ˜¯ `bcab`, å®é™…ä¸¤ä¸ªç­”æ¡ˆéƒ½ç¬¦åˆæ­£åˆ™åŒ¹é…, ä½†æ˜¯å› ä¸º"è´ªå©ª"çš„ç¼˜æ•…, æ‰€ä»¥æœ€ååŒ¹é…åˆ°çš„ç»“æœæ˜¯"æœ€å¤š"çš„é‚£ä¸ª, ä¹Ÿå°±æ˜¯ `bcab`.

![ä¾‹å­ä¹‹è´ªå©ªæ¨¡å¼](https://static.webjam.cn/images/202405/regex101-greedy-01.webp)

å¦‚ä½•åŒ¹é…æœ€å°‘é‚£ä¸ªå‘¢? é‚£å°±è¦ä½¿ç”¨"éè´ªå©ªæ¨¡å¼"äº†. å°†åˆšæ‰çš„æ­£åˆ™æ”¹ä¸º `/a(.*?)c/` å°±æ˜¯éè´ªå©ªæ¨¡å¼äº†, è¿™æ ·å°±æ˜¯åªåŒ¹é…ç¬¬ä¸€æ¬¡å‡ºç°çš„ `b` äº†.

![ä¾‹å­ä¹‹éè´ªå©ªæ¨¡å¼](https://static.webjam.cn/images/202405/regex101-greedy-02.webp)

è¿™ä¸¤ä¸ªä¾‹å­ä¹Ÿéƒ½å¯ä»¥ç‚¹å‡»æŸ¥çœ‹:

- [ä¾‹å­ä¹‹è´ªå©ªæ¨¡å¼ - regex101](https://regex101.com/r/bLKSc8/1)
- [ä¾‹å­ä¹‹éè´ªå©ªæ¨¡å¼ - regex101](https://regex101.com/r/bLKSc8/2)

## è´ªå©ªåŒ¹é…å’Œéè´ªå©ªåŒ¹é…çš„è§„åˆ™

æ­£åˆ™åŒ¹é…æ—¶ï¼Œå¦‚æœé‡åˆ°ä¸‹é¢è¿™äº›æ ‡è¯†ç¬¦ï¼Œä»£è¡¨æ˜¯è´ªå©ªåŒ¹é…ï¼Œä¼šå°½å¯èƒ½å¤šçš„å»åŒ¹é…å†…å®¹:

`+`ï¼Œ`?`ï¼Œ`*`ï¼Œ`{n}`ï¼Œ`{n,}`ï¼Œ`{n,m}`

ä¸ä¹‹å¯¹åº”çš„éè´ªå©ªåŒ¹é…æ ‡è¯†ç¬¦å¦‚ä¸‹:

`+?`ï¼Œ`??`ï¼Œ`*?`ï¼Œ`{n}?`ï¼Œ`{n,}?`ï¼Œ`{n,m}?`

å¯ä»¥çœ‹åˆ°ï¼Œéè´ªå©ªæ¨¡å¼çš„æ ‡è¯†ç¬¦å…¶å®å°±æ˜¯åœ¨è´ªå©ªæ¨¡å¼çš„æ ‡è¯†ç¬¦åé¢åŠ ä¸Šä¸€ä¸ª `?`

## æœ€ç»ˆä»£ç 

å› æ­¤åªéœ€è¦å°†ä¸€å¼€å§‹åŒ¹é… src å±æ€§çš„æ­£åˆ™æ”¹ä¸ºéè´ªå©ªæ¨¡å¼å³å¯: `/<img.*?src="(.*?)"/g`

![åŒ¹é… src å±æ€§ä¹‹éè´ªå©ªæ¨¡å¼](https://static.webjam.cn/images/202405/regex101-demo02.webp)

ç»“æœå’Œé¢„æœŸç›¸åŒ, åŒ¹é…åˆ°äº†å…¨éƒ¨çš„ src å±æ€§, æ‚¨å¯ä»¥ç‚¹å‡»æŸ¥çœ‹: [åŒ¹é… src å±æ€§ä¹‹éè´ªå©ªæ¨¡å¼ - regex101](https://regex101.com/r/dCCFvi/2)

æœ€åå®Œæ•´ä»£ç å¦‚ä¸‹:

```js
function getSrc(content) {
  const regex = /<img.*?src="(.*?)"/g;

  // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„ exec æ–¹æ³•æ¥æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„é“¾æ¥
  let match;
  const links = [];

  while ((match = regex.exec(content)) !== null) {
    // match[1] åŒ¹é…åˆ°çš„é“¾æ¥
    links.push(match[1]);
  }

  console.log(links);
  return links;
}
```

```js
const html = `<div class="row">
    <!-- æ³¨æ„é‡Œé¢ä¸‰ä¸ª img æ ‡ç­¾æ˜¯åœ¨åŒä¸€è¡Œ -->
    <img src="https://static.fastadmin.net/assets/images/app/code.png" alt=""> <img src="https://static.fastadmin.net/assets/images/app/browser.png" alt=""> <img src="https://static.fastadmin.net/assets/images/app/laptop.png" alt="">
</div>`;

getSrc(html);

// å¾—åˆ°å…¨éƒ¨çš„ src å±æ€§å€¼
// [
//     "https://static.fastadmin.net/assets/images/app/code.png",
//     "https://static.fastadmin.net/assets/images/app/browser.png",
//     "https://static.fastadmin.net/assets/images/app/laptop.png"
// ]
```

## Reference

- [Regular Expression in Python. Regex | by Anurag | Medium](https://nowitsanurag.medium.com/regular-expression-in-python-f42483e80daa)
- [The Complete Guide to Regular Expressions (Regex) - CoderPad](https://coderpad.io/blog/development/the-complete-guide-to-regular-expressions-regex/)
- [js ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼å…¥é—¨ - é™ˆæ°´æ°´ - åšå®¢å›­](https://www.cnblogs.com/chenmeng0818/p/6370819.html)
- [æ­£åˆ™è¡¨è¾¾å¼ä¹‹ Â  è´ªå©ªä¸éè´ªå©ªæ¨¡å¼è¯¦è§£ï¼ˆæ¦‚è¿°ï¼‰*æ­£åˆ™è¡¨è¾¾å¼*è„šæœ¬ä¹‹å®¶](https://www.jb51.net/article/31491.htm)
- [æ­£åˆ™è¡¨è¾¾å¼ â€“ å…ƒå­—ç¬¦ | èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/regexp/regexp-metachar.html)
- [ã€æ­£åˆ™è¡¨è¾¾å¼ç³»åˆ—ã€‘è´ªå©ªä¸éè´ªå©ªæ¨¡å¼ | Dailc çš„ä¸ªäººä¸»é¡µ](http://www.dailichun.com/2017/07/06/regularExpressionGreedyAndLazy.html)
